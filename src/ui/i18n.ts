declare const GM_getValue: (key: string, defaultValue?: any) => any;
declare const GM_setValue: (key: string, value: any) => void;

export type SupportedLang = 'zh-TW' | 'zh-CN' | 'en' | 'ja';

export interface I18NStrings {
    [key: string]: string | undefined;
}

// --- åœ‹éš›åŒ– (i18n) - ç¹ä¸­ã€ç°¡ä¸­ã€è‹±æ–‡ ---
export const I18N = {
    _lang: null as SupportedLang | null,

    // èªè¨€å­—å…¸
    strings: {
        'zh-TW': {
            title: 'YouTube æ·¨åŒ–å¤§å¸«',
            menu_rules: 'ğŸ“‚ è¨­å®šéæ¿¾è¦å‰‡',
            menu_low_view: 'ä½è§€çœ‹æ•¸éæ¿¾ (å«ç›´æ’­)',
            menu_threshold: 'ğŸ”¢ è¨­å®šé–¾å€¼',
            menu_grace: 'â³ è¨­å®šè±å…æœŸ',
            menu_content: 'ğŸ¥ éæ¿¾åŠŸèƒ½è¨­å®š',
            menu_lists: 'ğŸ›¡ï¸ é»‘/ç™½åå–®ç®¡ç†',
            menu_ux: 'ğŸ–±ï¸ ä»‹é¢èˆ‡é«”é©—',
            menu_system: 'ğŸ“Š ç³»çµ±èˆ‡å·¥å…·',
            menu_whitelist: 'ğŸ›¡ï¸ ç®¡ç†ç™½åå–®',
            menu_new_tab: 'å¼·åˆ¶æ–°åˆ†é  (å½±ç‰‡)',
            menu_notification_new_tab: 'å¼·åˆ¶æ–°åˆ†é  (é€šçŸ¥)',
            menu_debug: 'Debug',
            menu_reset: 'ğŸ”„ æ¢å¾©é è¨­',
            menu_stats: 'ğŸ“Š éæ¿¾çµ±è¨ˆ',
            menu_export: 'ğŸ’¾ åŒ¯å‡º/åŒ¯å…¥è¨­å®š',
            menu_lang: 'ğŸŒ èªè¨€',
            menu_input: 'è¼¸å…¥é¸é …:',
            stats_title: 'ã€ éæ¿¾çµ±è¨ˆ ã€‘',
            stats_empty: 'å°šæœªéæ¿¾ä»»ä½•å…§å®¹',
            stats_filtered: 'å·²éæ¿¾ {0} å€‹é …ç›®',
            export_title: 'ã€ è¨­å®šç®¡ç† ã€‘',
            export_export: 'ğŸ“¤ åŒ¯å‡ºè¨­å®š',
            export_import: 'ğŸ“¥ åŒ¯å…¥è¨­å®š',
            export_success: 'âœ… è¨­å®šå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼',
            export_copy: 'è«‹è¤‡è£½ä»¥ä¸‹è¨­å®š (Ctrl+C):',
            import_prompt: 'è«‹è²¼ä¸Šè¨­å®š JSON:',
            import_success: 'âœ… è¨­å®šå·²æˆåŠŸåŒ¯å…¥ï¼',
            import_fail: 'âŒ åŒ¯å…¥å¤±æ•—: ',
            rules_title: 'ã€ éæ¿¾è¦å‰‡ ã€‘',
            rules_back: '(0 è¿”å›)',
            threshold_prompt: 'è«‹è¼¸å…¥ã€Œè§€çœ‹æ•¸é–¾å€¼ã€ (ä½æ–¼æ­¤æ•¸å°‡è¢«éæ¿¾):',
            grace_prompt: 'è«‹è¼¸å…¥ã€Œè±å…æ™‚é–“ (å°æ™‚)ã€ (è¨­ç‚º 0 å‰‡ä¸è±å…):',
            adv_exact_prompt: 'æ˜¯å¦éœ€ç²¾æº–åŒ¹é…é »é“åç¨±ï¼Ÿ (1. æ˜¯ / 2. å¦)

â€»ç²¾æº–åŒ¹é…ï¼šå¿…é ˆå®Œå…¨ä¸€è‡´
â€»æ¨¡ç³ŠåŒ¹é…ï¼šåŒ…å«é—œéµå­—å³å¯',
            reset_confirm: 'é‡è¨­?',
            lang_title: 'ã€ é¸æ“‡èªè¨€ ã€‘',
            back: 'è¿”å›',
            adv_keyword_filter: 'é—œéµå­—éæ¿¾',
            adv_keyword_list: 'ğŸš« é—œéµå­—é»‘åå–®',
            adv_channel_filter: 'é »é“éæ¿¾',
            adv_channel_list: 'ğŸš« é »é“é»‘åå–®',
            adv_channel_whitelist: 'ğŸ›¡ï¸ é »é“ç™½åå–® (å¸¸è¦å½±ç‰‡)',
            adv_members_whitelist: 'ğŸ›¡ï¸ æœƒå“¡ç™½åå–® (å°ˆå±¬å½±ç‰‡)',
            adv_keyword_whitelist: 'ğŸ›¡ï¸ é—œéµå­—ç™½åå–®',
            adv_section_filter: 'æ¬„ä½éæ¿¾',
            adv_section_list: 'ğŸš« æ¬„ä½æ¨™é¡Œé»‘åå–®',
            adv_duration_filter: 'é•·åº¦éæ¿¾',
            adv_duration_set: 'â±ï¸ è¨­å®šé•·åº¦',
            adv_min: 'æœ€çŸ­(åˆ†):',
            adv_max: 'æœ€é•·(åˆ†):',
            adv_add: 'æ–°å¢',
            adv_remove: 'åˆªé™¤',
            adv_clear: 'ğŸ§¹ æ¸…ç©ºå…¨éƒ¨',
            adv_restore: 'âœ¨ æ¢å¾©é è¨­',
            adv_region_convert: 'ç¹ç°¡é€šç”¨éæ¿¾',
            adv_disable_channel: 'é »é“é é¢åœæ­¢éæ¿¾ (ä¿ç•™å…§å®¹)',
            next_page: 'ä¸‹ä¸€é ',
            prev_page: 'ä¸Šä¸€é '
        },
        'zh-CN': {
            title: 'YouTube å‡€åŒ–å¤§å¸ˆ',
            menu_rules: 'ğŸ“‚ è®¾ç½®è¿‡æ»¤è§„åˆ™',
            menu_low_view: 'ä½è§‚çœ‹æ•°è¿‡æ»¤ (å«ç›´æ’­)',
            menu_threshold: 'ğŸ”¢ è®¾ç½®é˜ˆå€¼',
            menu_grace: 'â³ è®¾ç½®è±å…æœŸ',
            menu_content: 'ğŸ¥ è¿‡æ»¤åŠŸèƒ½è®¾ç½®',
            menu_lists: 'ğŸ›¡ï¸ é»‘/ç™½åå•ç®¡ç†',
            menu_ux: 'ğŸ–±ï¸ ç•Œé¢èˆ‡ä½“éªŒ',
            menu_system: 'ğŸ“Š ç³»ç»Ÿèˆ‡å·¥å…·',
            menu_whitelist: 'ğŸ›¡ï¸ ç®¡ç†ç™½åå•',
            menu_new_tab: 'å¼ºåˆ¶æ–°æ ‡ç­¾é¡µ (è§†é¢‘)',
            menu_notification_new_tab: 'å¼ºåˆ¶æ–°æ ‡ç­¾é¡µ (é€šçŸ¥)',
            menu_debug: 'Debug',
            menu_reset: 'ğŸ”„ æ¢å¤é»˜è®¤',
            menu_stats: 'ğŸ“Š è¿‡æ»¤ç»Ÿè®¡',
            menu_export: 'ğŸ’¾ å¯¼å‡º/å¯¼å…¥è®¾ç½®',
            menu_lang: 'ğŸŒ è¯­è¨€',
            menu_input: 'è¾“å…¥é€‰é¡¹:',
            stats_title: 'ã€ è¿‡æ»¤ç»Ÿè®¡ ã€‘',
            stats_empty: 'å°šæœªè¿‡æ»¤ä»»ä½•å†…å®¹',
            stats_filtered: 'å·²è¿‡æ»¤ {0} ä¸ªé¡¹ç›®',
            export_title: 'ã€ è®¾ç½®ç®¡ç† ã€‘',
            export_export: 'ğŸ“¤ å¯¼å‡ºè®¾ç½®',
            export_import: 'ğŸ“¥ å¯¼å…¥è®¾ç½®',
            export_success: 'âœ… è®¾ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼',
            export_copy: 'è¯·å¤åˆ¶ä»¥ä¸‹è®¾ç½® (Ctrl+C):',
            import_prompt: 'è¯·ç²˜è´´è®¾ç½® JSON:',
            import_success: 'âœ… è®¾ç½®å·²æˆåŠŸå¯¼å…¥ï¼',
            import_fail: 'âŒ å¯¼å…¥å¤±è´¥: ',
            rules_title: 'ã€ è¿‡æ»¤è§„åˆ™ ã€‘',
            rules_back: '(0 è¿”å›)',
            threshold_prompt: 'è¯·è¾“å…¥ã€Œè§‚çœ‹æ•°é˜ˆå€¼ã€ (ä½äºæ­¤æ•°å°†è¢«è¿‡æ»¤):',
            grace_prompt: 'è¯·è¾“å…¥ã€Œè±å…æ—¶é—´ (å°æ—¶)ã€ (è®¾ä¸º 0 åˆ™ä¸è±å…):',
            adv_exact_prompt: 'æ˜¯å¦éœ€ç²¾æº–åŒ¹é…é¢‘é“åç§°ï¼Ÿ (1. æ˜¯ / 2. å¦)

â€»ç²¾æº–åŒ¹é…ï¼šå¿…é¡»å®Œå…¨ä¸€è‡´
â€»æ¨¡ç³ŠåŒ¹é…ï¼šåŒ…å«å…³é”®å­—å³å¯',
            reset_confirm: 'é‡ç½®?',
            lang_title: 'ã€ é€‰æ‹©è¯­è¨€ ã€‘',
            back: 'è¿”å›',
            adv_keyword_filter: 'å…³é”®å­—è¿‡æ»¤',
            adv_keyword_list: 'ğŸš« å…³é”®å­—é»‘åå•',
            adv_channel_filter: 'é¢‘é“è¿‡æ»¤',
            adv_channel_list: 'ğŸš« é¢‘é“é»‘åå•',
            adv_channel_whitelist: 'ğŸ›¡ï¸ é¢‘é“ç™½åå• (å¸¸è§„è§†é¢‘)',
            adv_members_whitelist: 'ğŸ›¡ï¸ ä¼šå‘˜ç™½åå• (ä¸“å±è§†é¢‘)',
            adv_keyword_whitelist: 'ğŸ›¡ï¸ å…³é”®å­—ç™½åå•',
            adv_section_filter: 'æ ä½è¿‡æ»¤',
            adv_section_list: 'ğŸš« æ ä½æ ‡é¢˜é»‘åå•',
            adv_duration_filter: 'æ—¶é•¿è¿‡æ»¤',
            adv_duration_set: 'â±ï¸ è®¾ç½®æ—¶é•¿',
            adv_min: 'æœ€çŸ­(åˆ†):',
            adv_max: 'æœ€é•¿(åˆ†):',
            adv_add: 'æ–°å¢',
            adv_remove: 'åˆ é™¤',
            adv_clear: 'ğŸ§¹ æ¸…ç©ºå…¨éƒ¨',
            adv_restore: 'âœ¨ æ¢å¤é»˜è®¤',
            adv_region_convert: 'ç¹ç®€é€šç”¨è¿‡æ»¤',
            adv_disable_channel: 'é¢‘é“é¡µé¢åœæ­¢è¿‡æ»¤ (ä¿ç•™å†…å®¹)',
            next_page: 'ä¸‹ä¸€é¡µ',
            prev_page: 'ä¸Šä¸€é '
        },
        'en': {
            title: 'YouTube Cleaner',
            menu_rules: 'ğŸ“‚ Filter Rules',
            menu_low_view: 'Low View Count Filter (Live included)',
            menu_threshold: 'ğŸ”¢ Set Threshold',
            menu_grace: 'â³ Set Grace Period',
            menu_content: 'ğŸ¥ Filtering Settings',
            menu_lists: 'ğŸ›¡ï¸ List Management',
            menu_ux: 'ğŸ–±ï¸ Interface & UX',
            menu_system: 'ğŸ“Š System & Tools',
            menu_whitelist: 'ğŸ›¡ï¸ Manage Whitelists',
            menu_new_tab: 'Force New Tab (Video)',
            menu_notification_new_tab: 'Force New Tab (Notif)',
            menu_debug: 'Debug',
            menu_reset: 'ğŸ”„ Reset to Default',
            menu_stats: 'ğŸ“Š Filter Stats',
            menu_export: 'ğŸ’¾ Export/Import Settings',
            menu_lang: 'ğŸŒ Language',
            menu_input: 'Enter option:',
            stats_title: 'ã€ Filter Statistics ã€‘',
            stats_empty: 'No content filtered yet',
            stats_filtered: 'Filtered {0} items',
            export_title: 'ã€ Settings Management ã€‘',
            export_export: 'ğŸ“¤ Export Settings',
            export_import: 'ğŸ“¥ Import Settings',
            export_success: 'âœ… Settings copied to clipboard!',
            export_copy: 'Copy settings (Ctrl+C):',
            import_prompt: 'Paste settings JSON:',
            import_success: 'âœ… Settings imported successfully!',
            import_fail: 'âŒ Import failed: ',
            rules_title: 'ã€ Filter Rules ã€‘',
            rules_back: '(0 Back)',
            threshold_prompt: 'Enter View Threshold:',
            grace_prompt: 'Enter Grace Period (Hours) (0 to disable):',
            adv_exact_prompt: 'Use exact match for this channel? (1. Yes / 2. No)

â€»Exact: Must be identical
â€»Partial: Contains keyword',
            reset_confirm: 'Reset?',
            lang_title: 'ã€ Select Language ã€‘',
            back: 'Back',
            adv_keyword_filter: 'Keyword Filter',
            adv_keyword_list: 'ğŸš« Keyword Blacklist',
            adv_channel_filter: 'Channel Filter',
            adv_channel_list: 'ğŸš« Channel Blacklist',
            adv_channel_whitelist: 'ğŸ›¡ï¸ Channel Whitelist (Regular)',
            adv_members_whitelist: 'ğŸ›¡ï¸ Members Whitelist (Exclusive)',
            adv_keyword_whitelist: 'ğŸ›¡ï¸ Keyword Whitelist',
            adv_section_filter: 'Section Filter',
            adv_section_list: 'ğŸš« Section Blacklist',
            adv_duration_filter: 'Duration Filter',
            adv_duration_set: 'â±ï¸ Set Duration',
            adv_min: 'Min (min):',
            adv_max: 'Max (min):',
            adv_add: 'Add',
            adv_remove: 'Remove',
            adv_clear: 'ğŸ§¹ Clear All',
            adv_restore: 'âœ¨ Restore Defaults',
            adv_region_convert: 'Region Agnostic Filter',
            adv_disable_channel: 'Disable on Channel Pages',
            next_page: 'Next Page',
            prev_page: 'Prev Page'
        },
        'ja': {
            title: 'YouTube æµ„åŒ–å¤§å¸«',
            menu_rules: 'ğŸ“‚ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ«ãƒ¼ãƒ«è¨­å®š',
            menu_low_view: 'ä½è¦–è´å›æ•¸ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ (ãƒ©ã‚¤ãƒ–å«ã‚€)',
            menu_threshold: 'ğŸ”¢ é–¾å€¤ã‚’è¨­å®š',
            menu_grace: 'â³ çŒ¶äºˆæœŸé–“ã‚’è¨­å®š',
            menu_content: 'ğŸ¥ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®š',
            menu_lists: 'ğŸ›¡ï¸ ãƒªã‚¹ãƒˆç®¡ç†',
            menu_ux: 'ğŸ–±ï¸ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­å®š',
            menu_system: 'ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ ã¨ãƒ„ãƒ¼ãƒ«',
            menu_whitelist: 'ğŸ›¡ï¸ ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆç®¡ç†',
            menu_new_tab: 'å¼·åˆ¶æ–°ã‚¿ãƒ– (å‹•ç”»)',
            menu_notification_new_tab: 'å¼·åˆ¶æ–°ã‚¿ãƒ– (é€šçŸ¥)',
            menu_debug: 'ãƒ‡ãƒãƒƒã‚°',
            menu_reset: 'ğŸ”„ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™',
            menu_stats: 'ğŸ“Š çµ±è¨ˆæƒ…å ±',
            menu_export: 'ğŸ’¾ è¨­å®šã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆ',
            menu_lang: 'ğŸŒ è¨€èª',
            menu_input: 'é¸ã‚“ã§ãã ã•ã„:',
            stats_title: 'ã€ çµ±è¨ˆæƒ…å ± ã€‘',
            stats_empty: 'ã¾ã ä½•ã‚‚ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ã¾ã›ã‚“',
            stats_filtered: '{0} å€‹ã®é …ç›®ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã—ãŸ',
            export_title: 'ã€ è¨­å®šç®¡ç† ã€‘',
            export_export: 'ğŸ“¤ è¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ',
            export_import: 'ğŸ“¥ è¨­å®šã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ',
            export_success: 'âœ… è¨­å®šã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼',
            export_copy: 'ä»¥ä¸‹ã®è¨­å®šã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ (Ctrl+C):',
            import_prompt: 'è¨­å®š JSON ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„:',
            import_success: 'âœ… è¨­å®šã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼',
            import_fail: 'âŒ ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¤±æ•—: ',
            rules_title: 'ã€ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ«ãƒ¼ãƒ« ã€‘',
            rules_back: '(0 æˆ»ã‚‹)',
            threshold_prompt: 'ã€Œè¦–è´å›æ•¸é–¾å€¼ã€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (ã“ã‚Œæœªæº€ã¯éè¡¨ç¤º):',
            grace_prompt: 'ã€ŒçŒ¶äºˆæœŸé–“ (æ™‚é–“)ã€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (0 ã¯çŒ¶äºˆãªã—):',
            adv_exact_prompt: 'ã“ã®ãƒãƒ£ãƒ³ãƒãƒ«ã‚’å®Œå…¨ä¸€è‡´ã§è¿½åŠ ã—ã¾ã™ã‹ï¼Ÿ (1. ã¯ã„ / 2. ã„ã„ãˆ)

â€»å®Œå…¨ä¸€è‡´ï¼šåå‰ãŒå®Œå…¨ã«åŒã˜
â€»éƒ¨åˆ†ä¸€è‡´ï¼šåå‰ã®ä¸€éƒ¨ã‚’å«ã‚€',
            reset_confirm: 'ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ',
            lang_title: 'ã€ è¨€èªã‚’é¸æŠ ã€‘',
            back: 'æˆ»ã‚‹',
            adv_keyword_filter: 'ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼',
            adv_keyword_list: 'ğŸš« ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆ',
            adv_channel_filter: 'ãƒãƒ£ãƒ³ãƒãƒ«ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼',
            adv_channel_list: 'ğŸš« ãƒãƒ£ãƒ³ãƒãƒ«ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆ',
            adv_channel_whitelist: 'ğŸ›¡ï¸ ãƒãƒ£ãƒ³ãƒãƒ«ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ (é€šå¸¸)',
            adv_members_whitelist: 'ğŸ›¡ï¸ ãƒ¡ãƒ³ãƒãƒ¼ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ (é™å®š)',
            adv_keyword_whitelist: 'ğŸ›¡ï¸ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ',
            adv_section_filter: 'ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼',
            adv_section_list: 'ğŸš« ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆ',
            adv_duration_filter: 'å‹•ç”»ã®é•·ã•ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼',
            adv_duration_set: 'â±ï¸ é•·ã•ã‚’è¨­å®š',
            adv_min: 'æœ€çŸ­(åˆ†):',
            adv_max: 'æœ€é•·(åˆ†):',
            adv_add: 'è¿½åŠ ',
            adv_remove: 'å‰Šé™¤',
            adv_clear: 'ğŸ§¹ å…¨ã¦ã‚¯ãƒªã‚¢',
            adv_restore: 'âœ¨ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™',
            adv_region_convert: 'ç¹é«”å­—/ç°¡é«”å­—å…±é€šãƒ•ã‚£ãƒ«ã‚¿ãƒ¼',
            adv_disable_channel: 'ãƒãƒ£ãƒ³ãƒãƒ«ãƒšãƒ¼ã‚¸ã§ã¯ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ç„¡åŠ¹ã«ã™ã‚‹',
            next_page: 'æ¬¡ã¸',
            prev_page: 'å‰ã¸'
        }
    } as Record<SupportedLang, I18NStrings>,

    // è¦å‰‡åç¨±ç¿»è­¯
    ruleNames: {
        'zh-TW': {
            ad_block_popup: 'å»£å‘Šé˜»æ“‹å½ˆçª—',
            ad_sponsor: 'å»£å‘Š/è´ŠåŠ©',
            members_only: 'æœƒå“¡å°ˆå±¬',
            shorts_item: 'Shorts é …ç›®',
            mix_only: 'åˆè¼¯',
            premium_banner: 'Premium æ©«å¹…',
            news_block: 'æ–°èå€å¡Š',
            shorts_block: 'Shorts å€å¡Š',
            posts_block: 'ç¤¾ç¾¤è²¼æ–‡',
            playables_block: 'å¯ç©å…§å®¹',
            fundraiser_block: 'å‹Ÿæ¬¾æ´»å‹•',
            shorts_grid_shelf: 'Shorts ç¶²æ ¼',
            movies_shelf: 'é›»å½±æ¨è–¦',
            youtube_featured_shelf: 'YouTube ç²¾é¸',
            popular_gaming_shelf: 'ç†±é–€éŠæˆ²',
            more_from_game_shelf: 'æ›´å¤šéŠæˆ²å…§å®¹',
            trending_playlist: 'ç†±é–€æ’­æ”¾æ¸…å–®',
            inline_survey: 'å•å·èª¿æŸ¥',
            clarify_box: 'è³‡è¨Šæ¡†',
            explore_topics: 'æ¢ç´¢ä¸»é¡Œ',
            recommended_playlists: 'æ¨è–¦æ’­æ”¾æ¸…å–®',
            members_early_access: 'æœƒå“¡æ¶å…ˆçœ‹'
        },
        'zh-CN': {
            ad_block_popup: 'å¹¿å‘Šæ‹¦æˆªå¼¹çª—',
            ad_sponsor: 'å¹¿å‘Š/èµåŠ©',
            members_only: 'ä¼šå‘˜ä¸“å±',
            shorts_item: 'Shorts é¡¹ç›®',
            mix_only: 'åˆè¾‘',
            premium_banner: 'Premium æ¨ªå¹…',
            news_block: 'æ–°é—»åŒºå—',
            shorts_block: 'Shorts åŒºå—',
            posts_block: 'ç¤¾åŒºå¸–å­',
            playables_block: 'å¯ç©å†…å®¹',
            fundraiser_block: 'å‹Ÿæ¬¾æ´»åŠ¨',
            shorts_grid_shelf: 'Shorts ç½‘æ ¼',
            movies_shelf: 'ç”µå½±æ¨è',
            youtube_featured_shelf: 'YouTube ç²¾é€‰',
            popular_gaming_shelf: 'çƒ­é—¨æ¸¸æˆ',
            more_from_game_shelf: 'æ›´å¤šæ¸¸æˆå†…å®¹',
            trending_playlist: 'çƒ­é—¨æ’­æ”¾åˆ—è¡¨',
            inline_survey: 'é—®å·è°ƒæŸ¥',
            clarify_box: 'ä¿¡æ¯æ¡†',
            explore_topics: 'æ¢ç´¢ä¸»é¢˜',
            recommended_playlists: 'æ¨èæ’­æ”¾åˆ—è¡¨',
            members_early_access: 'ä¼šå‘˜æŠ¢å…ˆçœ‹'
        },
        'en': {
            ad_block_popup: 'Ad-block Popup',
            ad_sponsor: 'Ads / Sponsors',
            members_only: 'Members Only',
            shorts_item: 'Shorts Items',
            mix_only: 'Mix Playlists',
            premium_banner: 'Premium Banner',
            news_block: 'News Section',
            shorts_block: 'Shorts Section',
            posts_block: 'Community Posts',
            playables_block: 'Playables',
            fundraiser_block: 'Fundraiser',
            shorts_grid_shelf: 'Shorts Grid',
            movies_shelf: 'Movies Shelf',
            youtube_featured_shelf: 'YouTube Featured',
            popular_gaming_shelf: 'Popular Gaming',
            more_from_game_shelf: 'More from Games',
            trending_playlist: 'Trending Playlist',
            inline_survey: 'Surveys',
            clarify_box: 'Clarify Box',
            explore_topics: 'Explore Topics',
            recommended_playlists: 'Recommended Playlists',
            members_early_access: 'Members Early Access'
        },
        'ja': {
            ad_block_popup: 'åºƒå‘Šãƒ–ãƒ­ãƒƒã‚¯ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—',
            ad_sponsor: 'åºƒå‘Š/ã‚¹ãƒãƒ³ã‚µãƒ¼',
            members_only: 'ãƒ¡ãƒ³ãƒãƒ¼é™å®š',
            shorts_item: 'Shorts é …ç›®',
            mix_only: 'ãƒŸãƒƒã‚¯ã‚¹ãƒªã‚¹ãƒˆ',
            premium_banner: 'Premium ãƒãƒŠãƒ¼',
            news_block: 'ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³',
            shorts_block: 'Shorts ã‚»ã‚¯ã‚·ãƒ§ãƒ³',
            posts_block: 'ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æŠ•ç¨¿',
            playables_block: 'ãƒ—ãƒ¬ã‚¤ã‚¢ãƒ–ãƒ«',
            fundraiser_block: 'å‹Ÿé‡‘æ´»å‹•',
            shorts_grid_shelf: 'Shorts ã‚°ãƒªãƒƒãƒ‰',
            movies_shelf: 'æ˜ ç”»ã®æ¨å¥¨',
            youtube_featured_shelf: 'YouTube ç‰¹é¸',
            popular_gaming_shelf: 'äººæ°—ã®ã‚²ãƒ¼ãƒ ',
            more_from_game_shelf: 'ã“ã®ã‚²ãƒ¼ãƒ ã®é–¢é€£ã‚³ãƒ³ãƒ†ãƒ³ãƒ„',
            trending_playlist: 'æ€¥ä¸Šæ˜‡ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆ',
            inline_survey: 'ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ',
            clarify_box: 'æƒ…å ±ãƒ‘ãƒãƒ«',
            explore_topics: 'ãƒˆãƒ”ãƒƒã‚¯ã‚’æ¢ç´¢',
            recommended_playlists: 'ãŠã™ã™ã‚ã®ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆ',
            members_early_access: 'ãƒ¡ãƒ³ãƒãƒ¼é™å®šå…ˆè¡Œå…¬é–‹'
        }
    } as Record<SupportedLang, Record<string, string>>,

    getRuleName(ruleKey: string): string {
        return this.ruleNames[this.lang]?.[ruleKey] || this.ruleNames['en'][ruleKey] || ruleKey;
    },

    detectLanguage(): SupportedLang {
        const ytLang = document.documentElement.lang || navigator.language || 'zh-TW';
        if (ytLang.startsWith('zh-CN') || ytLang.startsWith('zh-Hans')) return 'zh-CN';
        if (ytLang.startsWith('zh')) return 'zh-TW';
        if (ytLang.startsWith('ja')) return 'ja';
        return 'en';
    },

    get lang(): SupportedLang {
        if (!this._lang) {
            this._lang = (GM_getValue('ui_language', null) as SupportedLang | null) || this.detectLanguage();
        }
        return this._lang;
    },

    set lang(value: SupportedLang) {
        this._lang = value;
        GM_setValue('ui_language', value);
    },

    t(key: string, ...args: any[]): string {
        const str = this.strings[this.lang]?.[key] || this.strings['en'][key] || key;
        return str.replace(/\{(\d+)\}/g, (_, i) => args[i] ?? '');
    },

    get availableLanguages(): Record<SupportedLang, string> {
        return {
            'zh-TW': 'ç¹é«”ä¸­æ–‡',
            'zh-CN': 'ç®€ä½“ä¸­æ–‡',
            'en': 'English',
            'ja': 'æ—¥æœ¬èª'
        };
    }
};
